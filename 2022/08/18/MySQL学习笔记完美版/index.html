<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="MySQL学习笔记, 小白不白">
    <meta name="description" content="MySQL数据库数据库：存储数据的仓库
之前我们可以使用数组、集合、IO存储数据。其中数组和集合的数据在内存中，IO可以将数据持久化存储。
我们在实际开发中很多业务是需要将数据持久化的，此时使用IO将数据存储成一个普通的文件行不行？
可以，">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>MySQL学习笔记 | 小白不白</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.1.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">小白不白</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">小白不白</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/Cherish779/Cherish779.github.io.git" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/Cherish779/Cherish779.github.io.git" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/16.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">MySQL学习笔记</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                                <span class="chip bg-color">MySQL学习笔记</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-08-18
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    14.4k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    62 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="MySQL数据库"><a href="#MySQL数据库" class="headerlink" title="MySQL数据库"></a>MySQL数据库</h1><p>数据库：存储数据的仓库</p>
<p>之前我们可以使用数组、集合、IO存储数据。其中数组和集合的数据在内存中，IO可以将数据持久化存储。</p>
<p>我们在实际开发中很多业务是需要将数据持久化的，此时使用IO将数据存储成一个普通的文件行不行？</p>
<p>可以，但是不高效。比如我们将用户的数据存储成一个txt文件：</p>
<pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">1000 张三 20 男 北京 海淀区
1002 李四 21 男 上海 浦东区
1003 韩梅梅 22 女 成都 武侯区
.....<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>此时如果我们需要查询年龄大于21岁的用户有哪些。我们需要将文本中的每一行信息读取出来，然后按照空格分割，得到age字符串，再将字符串转成int，然后做比较。这样操作会发现数据越多处理效率越低。</p>
<p>如果我们需要将1003的地址修改成重庆 渝北区，发现需要将数据全部读取，修改后的数据重新覆盖整个旧文件，依然效率低下。</p>
<p>以上的操作之所以效率低下，是因为我们存储数据的数据结构没有专门的进行设计，就是一个普通的文本文件，所有数据在一起，全部是String。</p>
<p>为了解决在实际开发中操作数据的高效问题，就产生了数据库这种产品。<strong>数据库也是将数据持久化存储成多个文件，这些文件都是经过专门的设计的，底层有专门的数据结构来存储数据，所以我们直接打开数据库的数据文件是看不懂的，只有数据库软件可以读取。</strong></p>
<p><strong>数据库：高效存储和操作数据的仓库</strong></p>
<h2 id="MySQL相关的概念"><a href="#MySQL相关的概念" class="headerlink" title="MySQL相关的概念"></a>MySQL相关的概念</h2><p><img src="/.io//MySQL.assets%5Cimage-20220330090451104.png" alt="image-20220330090451104"></p>
<h2 id="数据库的分类"><a href="#数据库的分类" class="headerlink" title="数据库的分类"></a>数据库的分类</h2><h3 id="一、关系型数据库"><a href="#一、关系型数据库" class="headerlink" title="一、关系型数据库"></a>一、关系型数据库</h3><p>关系型数据库就是由<strong>二维表</strong>及<strong>其之间的关系</strong>组成的一个数据组织。</p>
<h4 id="常见的关系型数据库"><a href="#常见的关系型数据库" class="headerlink" title="常见的关系型数据库"></a>常见的关系型数据库</h4><ul>
<li>Oracle- 甲骨文</li>
<li>DB2  - IBM</li>
<li>MySQL - 甲骨文</li>
<li>SQLServer - 微软</li>
<li>SQLite - 移动端</li>
</ul>
<h3 id="二、非关系型数据库-NoSQL"><a href="#二、非关系型数据库-NoSQL" class="headerlink" title="二、非关系型数据库 - NoSQL"></a>二、非关系型数据库 - NoSQL</h3><p>NoSQL &#x3D; Not Only SQL</p>
<p>不是二维表结构，表之间也没有关系,无模式</p>
<h4 id="常见的非关系型数据库"><a href="#常见的非关系型数据库" class="headerlink" title="常见的非关系型数据库"></a>常见的非关系型数据库</h4><ul>
<li>Redis  – kv格式的数据库</li>
<li>MongoDB – 文档型数据库 </li>
<li>HBase  – 列族式数据库</li>
</ul>
<h2 id="MySQL下载和安装"><a href="#MySQL下载和安装" class="headerlink" title="MySQL下载和安装"></a>MySQL下载和安装</h2><p>下载地址：<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/windows/installer/5.7.html">https://dev.mysql.com/downloads/windows/installer/5.7.html</a></p>
<h3 id="MySQL安装文件夹介绍"><a href="#MySQL安装文件夹介绍" class="headerlink" title="MySQL安装文件夹介绍"></a>MySQL安装文件夹介绍</h3><p><img src="/images/MySQL.assets/1658192425615.png" alt="1658192425615"></p>
<p><img src="/images/MySQL.assets/1658192969381.png" alt="1658192969381"></p>
<h3 id="配置MySQL环境变量"><a href="#配置MySQL环境变量" class="headerlink" title="配置MySQL环境变量"></a>配置MySQL环境变量</h3><p><img src="/images/MySQL.assets/1658193041148.png" alt="1658193041148"></p>
<p><img src="/images/MySQL.assets/1658193107789.png" alt="1658193107789"></p>
<p>验证环境变量是否成功：</p>
<p><img src="/images/MySQL.assets/1658193187973.png" alt="1658193187973"></p>
<h2 id="MySQL客户端"><a href="#MySQL客户端" class="headerlink" title="MySQL客户端"></a>MySQL客户端</h2><ul>
<li><p><strong>DOS窗口 (需要使用命令)</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># -h 表示MySQL安装的主机名
# -P 表示MySQL的端口号
# -u 表示MySQL的用户名
# -p 表示MySQL用户的密码
C:\Users\NINGMEI&gt;mysql -hlocalhost -P3306 -uroot -p123456
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.

mysql&gt; exit
Bye<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>如果连接数据库的时候使用的是<code>-hlocalhost -P3306</code>，那么-h和-P可以省略</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">C:\Users\NINGMEI&gt;mysql -uroot -p123456
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>以上的写法不安全，密码明文显示了。</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># 推荐使用
C:\Users\NINGMEI&gt;mysql -uroot -p
Enter password: ******
Welcome to the MySQL monitor.  Commands end with ; or \g.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><strong>自带的workbench</strong></p>
</li>
<li><p><strong>第三方的客户端 （Navicat）</strong></p>
</li>
</ul>
<h2 id="SQL语句"><a href="#SQL语句" class="headerlink" title="SQL语句"></a>SQL语句</h2><p>MySQL数据库中使用的语言是SQL语句，所以我们要想操作MySQL数据库就需要学习SQL语句。</p>
<p>SQL：结构化查询语言（Structured Query Language）</p>
<p>标准SQL：在关系型数据库中都可以使用</p>
<p>方言SQL:   只能本数据库中使用</p>
<p><strong>MySQL中SQL语句关键字推荐使用大写</strong></p>
<h3 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h3><ul>
<li>DDL语句 - 数据定义语言（data definition language）<ul>
<li>作用：操作数据库相关对象（数据库、表、索引、视图等）</li>
<li>代表性的关键字：create(创建)、alter(修改)、drop(删除)</li>
</ul>
</li>
<li>DML语句 - 数据操作语言（Data Manipulation Language）<ul>
<li>作用：对表中的数据进行增加、删除、修改</li>
<li>代表性的关键字：insert(增加)、delete(删除)、update(修改)</li>
</ul>
</li>
<li>DQL语句 - 数据查询语言（data query language）<ul>
<li>作用：查询表中的数据</li>
<li>代表性的关键字：select(查询)</li>
</ul>
</li>
<li>TCL语句 - 事务控制语句（Transaction Control language）<ul>
<li>作用：事务的操作</li>
</ul>
</li>
</ul>
<h2 id="MySQL的数据类型"><a href="#MySQL的数据类型" class="headerlink" title="MySQL的数据类型"></a>MySQL的数据类型</h2><p><img src="/images/MySQL.assets/image-20220330112554284.png" alt="image-20220330112554284"></p>
<p><strong>MySQL的数据类型就是字段的数据类型。</strong></p>
<h3 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h3><ul>
<li><p>整型（精确值）</p>
<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Storage (Bytes)</th>
<th align="left">Minimum Value Signed(有符号)</th>
<th align="left">Minimum Value Unsigned(无符号)</th>
<th align="left">Maximum Value Signed</th>
<th align="left">Maximum Value Unsigned</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>TINYINT</code></td>
<td align="left">1</td>
<td align="left"><code>-128</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>127</code></td>
<td align="left"><code>255</code></td>
</tr>
<tr>
<td align="left"><code>SMALLINT</code></td>
<td align="left">2</td>
<td align="left"><code>-32768</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>32767</code></td>
<td align="left"><code>65535</code></td>
</tr>
<tr>
<td align="left"><code>MEDIUMINT</code></td>
<td align="left">3</td>
<td align="left"><code>-8388608</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>8388607</code></td>
<td align="left"><code>16777215</code></td>
</tr>
<tr>
<td align="left"><code>INT</code></td>
<td align="left">4</td>
<td align="left"><code>-2147483648</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>2147483647</code></td>
<td align="left"><code>4294967295</code></td>
</tr>
<tr>
<td align="left"><code>BIGINT</code></td>
<td align="left">8</td>
<td align="left"><code>-2^63</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>2^63-1</code></td>
<td align="left"><code>2^64-1</code></td>
</tr>
</tbody></table>
</li>
<li><p>浮点型（近似值）</p>
<ul>
<li>float 单精度，占4个字节</li>
<li>double 双精度，占8个字节</li>
<li>MySQL支持非标准的SQL: FLOAT(<em><code>M</code></em>,<em><code>D</code></em>),DOUBLE(<em><code>M</code></em>,<em><code>D</code></em>)<ul>
<li><strong>M表示总的数字位数</strong></li>
<li><strong>D表示小数位数，如果小数位超出了D的范围，会四舍五入。但是四舍五入后整数必须满足M的范围，否则出错</strong></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>定点型（精确值）</strong></p>
<ul>
<li>DECIMAL(M,D)<ul>
<li>M表示总的数字位数</li>
<li>D表示小数位数</li>
<li>DECIMAL(M,0) 等价于DECIMAL(M)。就是个整数</li>
<li><strong>注意：涉及到计算钱的时候，就必须使用定点型</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><ul>
<li>定长字符串：char(n),n表示字符的数量<ul>
<li>例如， <code>CHAR(30)</code>最多可容纳 30 个字符</li>
<li>n的取值范围0-255个字符</li>
<li>定长指的是，插入的数据长度小于n,尾部会使用空格将长度填充到n</li>
<li>弊端：浪费空间；优点：效率高 （以空间换时间）</li>
</ul>
</li>
<li>可变字符串： varchar(n),n表示字符的数量<ul>
<li>例如， <code>VARCHAR(30)</code>最多可容纳 30 个字符</li>
<li>n的取值范围0-65535个字节**(受到行大小（65535字节）的限制)**</li>
<li>可变的意思是，varchar中的数据占据的真实数据的长度的空间，不足n也不会使用空格填充</li>
<li><code>VARCHAR</code>值存储为 1 字节或 2 字节长度前缀加上数据。长度前缀表示值中的字节数。如果值需要不超过 255 个字节，则一列使用一个长度字节，如果值可能需要超过 255 个字节，则使用两个长度字节。</li>
<li>优点：节约空间；弊端：效率低（以时间换空间）</li>
<li>varchar字符数&#x3D; （65535 - 每个字段占据的内存大小 - 2 字节长度前缀 - 1字节空值） &#x2F; 字符集中单个字符的最大长度</li>
</ul>
</li>
<li>文本类型 - Text<ul>
<li>Text类型的数据只有9-12个字节和其他的字段共享行大小（65535字节）</li>
<li><strong>Text的数据部分是单独存储的，所以Text类型的数据大小不受到行大小（65535字节）的限制</strong></li>
</ul>
</li>
</ul>
<h3 id="日期时间类型"><a href="#日期时间类型" class="headerlink" title="日期时间类型"></a>日期时间类型</h3><ul>
<li>date: 日期类型<ul>
<li>只有年月日</li>
<li>取值范围：<code>&#39;1000-01-01&#39;</code> to <code>&#39;9999-12-31&#39;</code>.</li>
</ul>
</li>
<li>time: 时间类型<ul>
<li>只有时分秒</li>
<li>取值范围：’-838:59:59’<code>to</code>‘838:59:59’</li>
<li>time不仅表示时间，还表示时间的间隔</li>
</ul>
</li>
<li>year: 年<ul>
<li>只有年份</li>
<li>四位的年份取值范围：’1901’<code>to</code>‘2155’</li>
</ul>
</li>
<li>datetime：日期时间类型<ul>
<li>有年月日时分秒</li>
<li>取值范围：<code>&#39;1000-01-01 00:00:00&#39;</code> to <code>&#39;9999-12-31 23:59:59&#39;</code>.</li>
<li>值不受时区的影响</li>
</ul>
</li>
<li>timestamp: 时间戳<ul>
<li>有年月日时分秒</li>
<li>取值范围：1970-01-01 00:00:01’<code>UTC to</code>‘2038-01-19 03:14:07’</li>
<li>值受时区的影响</li>
<li>我们处于东八区，要更改为西巴区就 +8:00 小时。</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建表
create table if not exists db01.test(
  name varchar(20),
	info text,
	time1 datetime,
	time2 timestamp
);

# 更改时区为西八区
set time_zone&#x3D;&quot;-08:00&quot;;

select * from db01.test;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="DDL语句"><a href="#DDL语句" class="headerlink" title="DDL语句"></a>DDL语句</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># &#123;&#125; 表示必须要的内容
# | 表示或
# [] 表示可选
CREATE &#123;DATABASE | SCHEMA&#125; [IF NOT EXISTS] db_name
    [create_option] ...

create_option: [DEFAULT] &#123;
    CHARACTER SET [&#x3D;] charset_name
  | COLLATE [&#x3D;] collation_name
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- --和#表示注释信息
#  --和文字之间必须有空格
# 创建数据库
# 如果数据库不存在就创建，存在就不做操作
# 数据库默认的字符集是 latin1,不能存储中文
create database if not exists db01;

# 创建数据库的时候指定字符集为utf8
create database if not exists db02 character set utf8;

# 创建数据库的时候指定字符集为utf8,指定排序规则为utf8_bin
create database if not exists db03 character set utf8 collate utf8_bin;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">ALTER &#123;DATABASE | SCHEMA&#125; [db_name]
    alter_option ...

alter_option: &#123;
    [DEFAULT] CHARACTER SET [&#x3D;] charset_name
  | [DEFAULT] COLLATE [&#x3D;] collation_name
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 切换(使用)数据库
use db01;

-- 修改数据库的字符集
# 将db01的字符集修改成utf8
# 没有指定utf8的排序规则，默认就是utf8_general_ci
alter database db01 character set utf8;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DROP &#123;DATABASE | SCHEMA&#125; [IF EXISTS] db_name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 删除数据库
-- 如果数据库存在就删除，不存在就不做处理
drop database if exists db01;
drop database if exists db02;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE TABLE [IF NOT EXISTS] tbl_name
    (create_definition,...)
    [table_options]

CREATE TABLE [IF NOT EXISTS] tbl_name
    [(create_definition,...)]
    [table_options]
    [AS] query_expression

CREATE TABLE [IF NOT EXISTS] tbl_name
    &#123; LIKE old_tbl_name | (LIKE old_tbl_name) &#125;

create_definition: &#123;
    col_name column_definition
  | &#123;INDEX | KEY&#125; [index_name] [index_type] (key_part,...)
      [index_option] ...
  | [CONSTRAINT [symbol]] PRIMARY KEY
      [index_type] (key_part,...)
      [index_option] ...
  | [CONSTRAINT [symbol]] UNIQUE [INDEX | KEY]
      [index_name] [index_type] (key_part,...)
      [index_option] ...
  | [CONSTRAINT [symbol]] FOREIGN KEY
      [index_name] (col_name,...)
      reference_definition
&#125;

column_definition: &#123;
    data_type [NOT NULL | NULL] [DEFAULT default_value]
      [AUTO_INCREMENT] [UNIQUE [KEY]] [[PRIMARY] KEY]
      [COMMENT &#39;string&#39;]
&#125;

reference_definition:
    REFERENCES tbl_name (key_part,...)
      [ON DELETE reference_option]
      [ON UPDATE reference_option]

reference_option:
    RESTRICT | CASCADE | SET NULL | NO ACTION | SET DEFAULT

table_options:
    table_option [[,] table_option] ...

table_option: &#123;
    AUTO_INCREMENT [&#x3D;] value
  | [DEFAULT] CHARACTER SET [&#x3D;] charset_name
  | [DEFAULT] COLLATE [&#x3D;] collation_name
  | COMMENT [&#x3D;] &#39;string&#39;
  | ENGINE [&#x3D;] engine_name
&#125;

query_expression:
    SELECT ...   (Some valid select or union statement)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># 创建学生表
create table if not exists db01.student(
  -- 数据库中除了数字外，其余类型的值都是用单引号或双引号引起来
  uid int comment &quot;学号&quot;,
	&#96;name&#96; char(4)  comment &quot;姓名&quot;,
	-- unsigned 表示无符号 --&gt; 年龄是正数
	age tinyint unsigned comment &quot;年龄&quot;,
	-- 最后一个字段没有逗号
	sex char(2) comment &quot;性别&quot;,
    -- 建议在开发中给自己表添加&#39;创建时间&#39;和&#39;更新时间&#39;
    create_time datatime comment &#39;创建时间&#39;,
    update_time datatime comment &#39;更新时间&#39;
)comment&#x3D;&quot;学生表&quot;;


-- 查看建库语句
show create database db01;

-- 查看建表语句
show create table db01.student;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="修改数据表"><a href="#修改数据表" class="headerlink" title="修改数据表"></a>修改数据表</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">ALTER TABLE tbl_name
    [alter_option [, alter_option] ...]

alter_option: &#123;
    table_options
  | ADD [COLUMN] col_name column_definition
        [FIRST | AFTER col_name]
  | ADD [COLUMN] (col_name column_definition,...)
  | ADD &#123;INDEX | KEY&#125; [index_name]
        [index_type] (key_part,...) [index_option] ...
  | ADD [CONSTRAINT [symbol]] PRIMARY KEY
        [index_type] (key_part,...)
  | ADD [CONSTRAINT [symbol]] UNIQUE [INDEX | KEY]
        [index_name] [index_type] (key_part,...)
        [index_option] ...
  | ADD [CONSTRAINT [symbol]] FOREIGN KEY
        [index_name] (col_name,...)
        reference_definition
  | ALTER [COLUMN] col_name &#123;
        SET DEFAULT &#123;literal | (expr)&#125;
      | DROP DEFAULT
    &#125;
  | CHANGE [COLUMN] old_col_name new_col_name column_definition
        [FIRST | AFTER col_name]
  | DROP [COLUMN] col_name
  | DROP &#123;INDEX | KEY&#125; index_name
  | DROP PRIMARY KEY
  | DROP FOREIGN KEY fk_symbol
  | MODIFY [COLUMN] col_name column_definition
        [FIRST | AFTER col_name]
  | RENAME &#123;INDEX | KEY&#125; old_index_name TO new_index_name
  | RENAME [TO | AS] new_tbl_name
&#125;

table_options:
    table_option [[,] table_option] ...

table_option: &#123;
    AUTO_INCREMENT [&#x3D;] value
  | [DEFAULT] CHARACTER SET [&#x3D;] charset_name
  | [DEFAULT] COLLATE [&#x3D;] collation_name
  | COMMENT [&#x3D;] &#39;string&#39;
  | ENGINE [&#x3D;] engine_name
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 在student表中添加address字段
alter table db01.student add address varchar(20) not null;

-- 在student表中添加score字段在sex字段之后
alter table db01.student add score int after sex;

-- 将student表中的uid字段设置成主键
alter table db01.student add primary key(uid);

-- 将student表中的sex字段改成gender
-- change 主要用于修改字段的名称
alter table db01.student change sex gender char(2);

-- 将student表中的uid主键设置成自增
alter table db01.student change uid uid int auto_increment;

-- 将student表中的gender修改成varchar(3)
-- modify更改字段的其他信息，除了名字
alter table db01.student modify gender varchar(3);

-- 删除student表中的address
alter table db01.student drop address;


-- 删除student表中的name字段的unique索引
alter table db01.student drop index name_key;

-- 删除student表中的主键
-- 删除主键之前需要先取消自增
-- 先取消自增
alter table db01.student modify uid int;
-- 删除主键
alter table db01.student drop primary key;

-- 将student表名修改成t_student
alter table db01.student rename to t_student;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="RENAME-TABLE-语句"><a href="#RENAME-TABLE-语句" class="headerlink" title="RENAME TABLE 语句"></a>RENAME TABLE 语句</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">RENAME TABLE
    tbl_name TO new_tbl_name
    [, tbl_name2 TO new_tbl_name2] <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 将t_student表名修改成student
rename table t_student to student;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DROP TABLE [IF EXISTS]
    tbl_name [, tbl_name] ...
    [RESTRICT | CASCADE]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 删除表
drop table if exists student,student01,student02,student03;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="TRUNCATE-TABLE-语句"><a href="#TRUNCATE-TABLE-语句" class="headerlink" title="TRUNCATE TABLE 语句"></a>TRUNCATE TABLE 语句</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">TRUNCATE [TABLE] tbl_name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- truncate清空数据
-- 1.先将数据表删除
-- 2.创建一张空表
truncate table student04;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="字段约束"><a href="#字段约束" class="headerlink" title="字段约束"></a>字段约束</h2><p>字段约束的作用就是<strong>对字段的值进行限制</strong>，保证数据的安全性和完整性。</p>
<h3 id="主键约束-primary-key"><a href="#主键约束-primary-key" class="headerlink" title="主键约束-primary key"></a>主键约束-primary key</h3><ul>
<li><strong>一张表只能有一个主键</strong></li>
<li><strong>主键的值唯一且非空的</strong></li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建学生表01
create table if not exists db01.student01(
    -- uid设置成主键
    -- primary key 表示主键， primary key在建表语句中只能出现一次
    uid int primary key,
	name char(10),
	age int
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>以上的方式只能将一个字段设置成主键。<strong>开发中有时候我们需要将多个字段组合成一个主键,这种主键叫做复合主键。</strong></p>
<p>复合主键需要使用以下的方式设置：</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建学生表02
create table if not exists db01.student02(
  uid int,
	name char(10),
	age int,
	-- 复合主键，主键只有一个，只是这个主键是由两个字段组成的
	primary key(uid,name)
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>如果主键字段的数据类型是数字类型，可以使用自动增长（auto_increment）</strong></li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建学生表03
create table if not exists db01.student03(
  -- 设置主键并自增,自增初始化是1
  uid int primary key auto_increment,
	name char(10),
	age int
);

-- 创建学生表04
create table if not exists db01.student04(
  -- 设置主键并自增
  uid int primary key auto_increment,
	name char(10),
	age int
	-- 更改自增的初始值为1000
)auto_increment&#x3D;1000;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：自增字段的值只会自增。当删除自增字段已自增的记录后，下一个自增字段值不会改变，依然是“数值+1”。</strong></p>
<p><strong>在开发中推荐使用一个跟业务无关的字段作为主键。</strong></p>
<h3 id="唯一性约束-unique"><a href="#唯一性约束-unique" class="headerlink" title="唯一性约束 - unique"></a>唯一性约束 - unique</h3><ul>
<li><strong>字段的值不能有重复的</strong></li>
<li><strong>允许为null，且null值不受唯一性约束</strong></li>
<li><strong>一张表可以有多个唯一性约束</strong></li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建学生表05
create table if not exists db01.student05(
    -- 设置主键并自增
    uid int primary key auto_increment,
	-- name必须唯一
	name char(10) unique,
	age int
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="非空约束-Not-Null"><a href="#非空约束-Not-Null" class="headerlink" title="非空约束 - Not Null"></a>非空约束 - Not Null</h3><ul>
<li>值不能为null</li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建学生表06
create table if not exists db01.student06(
  -- 设置主键并自增
  uid int primary key auto_increment,
	-- name必须唯一且不能为null
	name char(10) unique not null,
	age int
);

-- 查看表的信息
mysql&gt; desc student06;
+-------+----------+------+-----+---------+----------------+
| Field | Type     | Null | Key | Default | Extra          |
+-------+----------+------+-----+---------+----------------+
| uid   | int(11)  | NO   | PRI | NULL    | auto_increment |
| name  | char(10) | NO   | UNI | NULL    |                |
| age   | int(11)  | YES  |     | NULL    |                |
+-------+----------+------+-----+---------+----------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>unique not null 和primary key的区别</strong>：</p>
<ul>
<li>primary key 一张表只能有一个</li>
<li>unique not null 一张表可以有多个</li>
</ul>
<h3 id="默认值约束-default"><a href="#默认值约束-default" class="headerlink" title="默认值约束 - default"></a>默认值约束 - default</h3><ul>
<li>可以给字段设置默认值</li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建学生表08
create table if not exists db01.student08(
  uid int,
	-- name必须唯一且不能为null
	name char(10) unique not null default &quot;&quot;,
	age int,
	-- 设置字段的默认值
	sex char(6) default &#39;male&#39;
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="外键约束-后面讲"><a href="#外键约束-后面讲" class="headerlink" title="外键约束 - 后面讲"></a>外键约束 - 后面讲</h3><h2 id="显示宽度"><a href="#显示宽度" class="headerlink" title="显示宽度"></a>显示宽度</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table if not exists db01.student09(
  -- 3表示的是显示宽度，需要配合零填充才有效果
  uid int(3) zerofill,
	name char(10) unique not null default &quot;&quot;,
	age int,
	sex char(6) default &#39;male&#39;
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="DML语句"><a href="#DML语句" class="headerlink" title="DML语句"></a>DML语句</h2><blockquote>
<p>DML语句操作的数据表中的数据</p>
</blockquote>
<h3 id="插入语句-insert"><a href="#插入语句-insert" class="headerlink" title="插入语句-insert"></a>插入语句-insert</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">INSERT [INTO] tbl_name
    [(col_name [, col_name] ...)]
    &#123;VALUES | VALUE&#125; (value_list) [, (value_list)] ...


INSERT [INTO] tbl_name
    [(col_name [, col_name] ...)]
    SELECT ...

value_list:
    value [, value] ...
    
value:
    &#123;expr | DEFAULT&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建学生表
create table if not exists student (
  _id bigint primary key auto_increment,
	sid int unsigned not null unique,
	name varchar(12) not null,
	gender char(6) default &#39;male&#39;,
	province text,
	create_time datetime,
	update_time datetime
);

-- 插入一条数据
insert into student (_id,sid,name,gender,province,create_time,update_time)
values (1,1001,&#39;zhangsan&#39;,&#39;male&#39;,&#39;四川省&#39;,&#39;2022-03-30 17:22:10&#39;,&#39;2022-03-30 17:22:10&#39;);

-- 插入多条数据
insert into student (_id,sid,name,gender,province,create_time,update_time)
values (2,1002,&#39;lisi&#39;,&#39;male&#39;,&#39;四川省&#39;,&#39;2022-03-30 17:25:10&#39;,&#39;2022-03-30 17:25:10&#39;),
(3,1003,&#39;hanmeimei&#39;,&#39;male&#39;,&#39;重庆市&#39;,&#39;2022-03-30 17:25:10&#39;,&#39;2022-03-30 17:25:10&#39;);

-- 插入数据的时候，如果是插入全部字段的数据，字段可以不写
insert into student 
values (4,1004,&#39;zhaosi&#39;,&#39;male&#39;,&#39;四川省&#39;,&#39;2022-03-30 17:25:10&#39;,&#39;2022-03-30 17:25:10&#39;),
(5,1005,&#39;liuneng&#39;,&#39;male&#39;,&#39;重庆市&#39;,&#39;2022-03-30 17:25:10&#39;,&#39;2022-03-30 17:25:10&#39;);

-- 插入部分字段的数据，字段不可以省略
-- 非空字段必须插入值，除非有默认值
insert into student (sid,name) values (1006,&#39;test&#39;);
-- 有默认值的字段，插入数据的时候可以使用default表示默认值
insert into student (sid,name,gender) values (1007,&#39;test01&#39;,default);
-- 插入数据的时候，自增的主键可以使用0或null
insert into student (_id,sid,name) values (0,1008,&#39;test02&#39;);
insert into student (_id,sid,name) values (null,1009,&#39;test03&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="更新语句-update"><a href="#更新语句-update" class="headerlink" title="更新语句-update"></a>更新语句-update</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">UPDATE tableName
    SET assignment_list
    [WHERE where_condition]
    [LIMIT row_count]
    
    
assignment_list:
    assignment [, assignment] ...
   

assignment:
    col_name &#x3D; value
    
value:
    &#123;expr | DEFAULT&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">## 将student表中的性别修改成female
## 修改所有行的数据
update student set gender &#x3D; &#39;female&#39;;

## 修改前三行的数据
update student set gender &#x3D; &#39;male&#39; limit 3;

## 将student中sid为1006的gender修改成male
## where子句进行条件过滤
update student set gender &#x3D; &#39;male&#39; where sid &#x3D; 1006;

## 有默认值的字段赋值的时候可以使用default
update student set gender &#x3D; default where sid &#x3D; 1008;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="删除语句-delete"><a href="#删除语句-delete" class="headerlink" title="删除语句-delete"></a>删除语句-delete</h3><p><strong>单表语法：</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DELETE FROM tbl_name
    [WHERE where_condition]
    [LIMIT row_count]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><strong>多表语句：</strong>– 了解</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DELETE tbl_name[.*] [, tbl_name[.*]] ...
    FROM table_references
    [WHERE where_condition]

DELETE FROM tbl_name[.*] [, tbl_name[.*]] ...
     USING table_references
    [WHERE where_condition]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 删除student表的所有数据，属于DML
-- 逐行删除
delete from student;

-- 删除表再新建一张空表，属于DDL
truncate table student;

-- 使用where过滤指定的数据
delete from student where sid &#x3D; 1009;

-- 删除student表的所有数据
delete student.*
    from student;
		
-- 删除多张表  -- 了解
-- 92语法： using后面多张表使用逗号
delete from db01.student,db01.student01 using student,student01;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="表关系"><a href="#表关系" class="headerlink" title="表关系"></a>表关系</h2><ul>
<li><p><strong>一对一</strong>： 一张表中的一行数据只会对应另外一张表的一行数据</p>
<p><img src="/images/MySQL.assets/image-20220401095533764.png" alt="image-20220401095533764"></p>
</li>
<li><p><strong>一对多&#x2F;多对一</strong>：一张表中一行数据对应另外一张表中的多行数据</p>
<ul>
<li><p>比如班级和学生、员工和部门</p>
<p><img src="/images/MySQL.assets/image-20220401100428723.png" alt="image-20220401100428723"></p>
<p>以上设计的表有问题：</p>
<ol>
<li>部门数据冗余，浪费空间</li>
<li>如果现在部门名称发生变更，那么以上表中的数据就要将该部门的所有员工数据进行更新，效率也不高</li>
</ol>
<p>所以我们需要将以上的表进行拆分，以上的表是一对多&#x2F;多对一的关系，所以我们拆成两张表：</p>
<p><strong>拆分规则：</strong></p>
<ol>
<li>将一的方拆成一张表（部门表）</li>
<li>将多的一方也拆成一张表（员工表）</li>
<li><strong>多的一方添加外键，引用少的一方的主键字段</strong></li>
</ol>
<p><img src="/images/MySQL.assets/image-20220401101117777-16487790832141.png" alt="image-20220401101117777"></p>
</li>
</ul>
</li>
<li><p><strong>多对多</strong>：表1中一行数据对应表2中的多行数据，表2中一行数据对应表1中的多行数据</p>
<ul>
<li><p>学生和老师或者学生和科目</p>
<p><img src="/images/MySQL.assets/image-20220401101951654.png" alt="image-20220401101951654"></p>
</li>
</ul>
</li>
</ul>
<p>以上设计的表，数据冗余了。所以需要拆表。以上表的关系是多对多的关系，所以<strong>拆分规则如下：</strong></p>
<ol>
<li>将两边多的一方都拆成一张独立表（就有两张表了）</li>
<li><strong>创建一张中间关系表，关系表中使用以上两张表的主键作为外键字段</strong></li>
</ol>
<p><img src="/images/MySQL.assets/image-20220401102727436.png" alt="image-20220401102727436"></p>
<h2 id="外键约束-foreign-key"><a href="#外键约束-foreign-key" class="headerlink" title="外键约束 - foreign key"></a>外键约束 - foreign key</h2><p><strong>外键：就是外部的键。也就是该字段的内容来自其他表。</strong></p>
<h3 id="外键的作用"><a href="#外键的作用" class="headerlink" title="外键的作用"></a>外键的作用</h3><p><strong>保证数据的一致性和完整性、安全性。</strong>有了外键约束后字段的数据就不能乱写了。</p>
<h3 id="一对多的外键约束"><a href="#一对多的外键约束" class="headerlink" title="一对多的外键约束"></a>一对多的外键约束</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建部门表
create table dept(
  did int primary key,
	name char(10)
);

-- 创建员工表
create table emp(
 eid int primary key,
 name char(10),
 age tinyint,
 sex char(6),
 did int,
 -- 约束     约束名            外键     外键字段  引用  表   引用字段
 constraint fk_emp_dept_did foreign key (did) references dept(did)
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/images/MySQL.assets/image-20220401110006844.png" alt="image-20220401110006844"></p>
<p><strong>父表：被外键引用的表叫做父表。</strong>（上面的部门表就是父表）</p>
<p><strong>子表：有外键的表。</strong>（上面的员工表就是子表）</p>
<h3 id="多对多关系的外键创建"><a href="#多对多关系的外键创建" class="headerlink" title="多对多关系的外键创建"></a>多对多关系的外键创建</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建学生表
create table t_stu(
    sid int primary key,
	name char(10),
	age int,
	sex char(10)
);

-- 创建学科表
create table t_subject(
 sub_id int primary key,
 sname char(10)
);

-- 创建学生和学科的关系表
create table t_stu_sub_rel(
 _id int primary key,
 sid int,
 sub_id int,
 foreign key (sid) references t_stu(sid),
 foreign key (sub_id) references t_subject(sub_id)
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="外键的注意事项"><a href="#外键的注意事项" class="headerlink" title="外键的注意事项"></a>外键的注意事项</h3><ul>
<li>外键引用表中的引用字段必须具备唯一性</li>
<li>外键字段和引用字段的数据类型要一致，数值类型长度和符号要一致。字符串类型长度可以不一样</li>
<li><strong>建议：外键字段和引用字段的数据类型一致，长度也一致</strong></li>
<li>删除表，需要先删除子表，再删除父表</li>
<li>父子表必须使用相同的存储引擎，不能定义为临时表。</li>
<li>虚拟表（dual）</li>
</ul>
<h2 id="DQL语句⭐⭐⭐"><a href="#DQL语句⭐⭐⭐" class="headerlink" title="DQL语句⭐⭐⭐"></a>DQL语句⭐⭐⭐</h2><p>DML语句操作会修改原始数据；返回的是多少行受影响。</p>
<p><strong>DQL语句不会修改原始数据；返回的是查询到的结果集，是一张虚拟表。</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT
    [ALL | DISTINCT ]
    select_expr [, select_expr] ...
    [FROM table_references]
    [WHERE where_condition]
    [GROUP BY &#123;col_name&#125;
    [HAVING where_condition]
    [ORDER BY &#123;col_name&#125;
      [ASC | DESC], ...]
    [LIMIT &#123;[offset,] row_count | row_count OFFSET offset&#125;]
    [FOR UPDATE]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询student表的所有数据
-- select 返回的是虚拟表，数据在内存中
-- select 后面跟的字段叫做投影(project)字段
-- 投影字段：也就是虚拟表中需要显示的字段
-- * 表示所有的字段，也就是投影所有的字段
select * from student;
-- 下面的语句表示只投影nane和gender
-- 虽然只投影了name和gender，但是其他的所有字段也在内存中
select name,gender from student;

-- 查找性别是male的学生的名字和性别
select name,gender from student where gender &#x3D;&#39;male&#39;;

-- select语句不会修改原始数据
select sid+1000,name,gender from student;

-- as 给字段取别名，as可以省略
select sid as id ,name,gender from student;

-- distinct前面不能再写投影字段
-- 按照job字段的值去重
select distinct job from emp;
-- 按照job+ename的值去重
select distinct job,ename from emp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/images/MySQL.assets/image-20220401114338165.png" alt="image-20220401114338165"></p>
<h2 id="单行函数和操作符"><a href="#单行函数和操作符" class="headerlink" title="单行函数和操作符"></a>单行函数和操作符</h2><h3 id="比较函数和操作符"><a href="#比较函数和操作符" class="headerlink" title="比较函数和操作符"></a>比较函数和操作符</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_greater-than"><code>&gt;</code></a></td>
<td align="left">大于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_greater-than-or-equal"><code>&gt;=</code></a></td>
<td align="left">大于或等于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_less-than"><code>&lt;</code></a></td>
<td align="left">小于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_not-equal"><code>&lt;&gt;</code>,<code>!=</code></a></td>
<td align="left">不等于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_less-than-or-equal"><code>&lt;=</code></a></td>
<td align="left">小于或等于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_equal-to"><code>&lt;=&gt;</code></a></td>
<td align="left"><strong>NULL 安全等于运算符</strong></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_equal"><code>=</code></a></td>
<td align="left">等号运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_between"><code>BETWEEN ... AND ...</code></a></td>
<td align="left">一个值是否在一个值范围内</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_in"><code>IN()</code></a></td>
<td align="left">一个值是否在一组值内</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_is-not-null"><code>IS NOT NULL</code></a></td>
<td align="left">NOT NULL 值测试</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_is-null"><code>IS NULL</code></a></td>
<td align="left">空值测试</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#function_isnull"><code>ISNULL()</code></a></td>
<td align="left">测试参数是否为 NULL</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/string-comparison-functions.html#operator_like"><code>LIKE</code></a></td>
<td align="left"><strong>简单的模式匹配</strong></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_not-between"><code>NOT BETWEEN ... AND ...</code></a></td>
<td align="left">值是否不在值范围内</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_not-in"><code>NOT IN()</code></a></td>
<td align="left">一个值是否不在一组值内</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/string-comparison-functions.html#operator_not-like"><code>NOT LIKE</code></a></td>
<td align="left">简单模式匹配的否定</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/string-comparison-functions.html#function_strcmp"><code>STRCMP()</code></a></td>
<td align="left"><strong>比较两个字符串</strong></td>
</tr>
</tbody></table>
<p>在MySQL中可以使用<code>&lt;&gt;</code>和<code>!=</code>表示不等于。但是!&#x3D;是编程语言中使用的，MySQL兼容了。<strong>真正MySQL的不等于是&lt;&gt;。</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询不是四川省的学生信息
select * from student where province !&#x3D; &quot;四川省&quot;;
select * from student where province &lt;&gt; &quot;四川省&quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>&lt;&#x3D;&gt;null安全等于操作符</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询省份是null的学生信息
-- &lt;&#x3D;&gt;是MySQL的SQL方言
select * from student where province &lt;&#x3D;&gt; null;

-- 查询省份是null的学生信息
select * from student where province is null;

-- 查询省份不是null的学生信息
select * from student where province is not null;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询年龄大于等于22小于等于25的学生信息
-- between 22 and 25 : 大于等于22小于等于25
select * from student where age between 22 and 25;

-- 查询年龄是21，23，25的学生信息
-- age in(21,23,25) 表示age等于()中的任何一个值
select * from student where age &#x3D; 21 or age &#x3D; 23 or age &#x3D; 25;
select * from student where age in(21,23,25);

-- where后面的表达式结果是boolean
-- 查询age是null的信息
-- is null是操作符
select * from db02.student where age is null;
-- isnull()是函数
select * from db02.student where isnull(age);

select isnull(10); -- mysql中0可以表示false
select isnull(null); -- mysql中1可以表示true,非0都是true

-- 查询姓张的学生
-- like 模糊查询
-- %表示0到多个字符
-- _表示1个字符
select * from student where name like &#39;张%&#39;;

-- 查询名字是张x的学生
select * from student where name like &#39;张_&#39;;

-- 查询姓名中包含张的学生信息
-- 注意：%或者_在最前面，索引就会失效
select * from student where name like &#39;%张%&#39;;

-- 比较两个字符串
-- 0 表示相等
-- -1 表示小于
-- 1 表示大于
select strcmp(&quot;java&quot;,&quot;java&quot;); -- 0
select strcmp(&quot;hello&quot;,&quot;java&quot;); -- -1
select strcmp(&quot;zero&quot;,&quot;hello&quot;); -- 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="逻辑操作符"><a href="#逻辑操作符" class="headerlink" title="逻辑操作符"></a>逻辑操作符</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/logical-operators.html#operator_and"><code>AND</code>,<code>&amp;&amp;</code></a></td>
<td align="left">逻辑与</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/logical-operators.html#operator_not"><code>NOT</code>,<code>!</code></a></td>
<td align="left">否定价值</td>
</tr>
<tr>
<td align="left">[<code>OR</code>,&#96;</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/logical-operators.html#operator_xor"><code>XOR</code></a></td>
<td align="left">逻辑异或</td>
</tr>
</tbody></table>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询年龄大于等于22小于等于25的学生信息
select * from student where age &gt;&#x3D; 22 and age &lt;&#x3D; 25;
select * from student where age &gt;&#x3D; 22 &amp;&amp; age &lt;&#x3D; 25;

-- 查询年龄等于22或者等于25的学生信息
select * from student where age &#x3D; 22 or age &#x3D; 25;
select * from student where age &#x3D; 22 || age &#x3D; 25;

-- 查询姓名不姓张的学生信息
select * from student where name not like &#39;张%&#39;;

-- 查询四川或重庆的女生
-- and和or同时存在，and的优先级高
select * from student where (province &#x3D; &#39;四川省&#39; or province &#x3D; &#39;重庆市&#39;) and gender &#x3D; &#39;female&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>XOR逻辑异或</strong>：<strong>如果任意一个操作数为NULL，则返回NULL。非空的操作数，相同为假，不同为真</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">mysql&gt; SELECT 1 XOR 1;
        -&gt; 0
mysql&gt; SELECT 1 XOR 0;
        -&gt; 1
mysql&gt; SELECT 1 XOR NULL;
        -&gt; NULL
mysql&gt; SELECT 1 XOR 1 XOR 1;
        -&gt; 1
        
-- 逻辑运算符连接的是boolean值
-- 非0 都表示真
SELECT 2 XOR 1 XOR 1; -- 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/assignment-operators.html#operator_assign-value"><code>:=</code></a></td>
<td align="left">赋值</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/assignment-operators.html#operator_assign-equal"><code>=</code></a></td>
<td align="left">赋值（作为 <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/set-variable.html"><code>SET</code></a> 语句的一部分，或作为UPDATE语句中<code>SET</code>子句的 一部分）</td>
</tr>
</tbody></table>
<p>&#x3D;号可以用作比较运算符，还可以作为赋值运算符</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 赋值运算符
set time_zone &#x3D; &quot;-08:00&quot;;
update student set name &#x3D; &quot;不知道&quot;;

-- 与&#x3D;不同，:&#x3D; 运算符永远不会被解释为比较运算符
set time_zone :&#x3D; &quot;+08:00&quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="算术操作符"><a href="#算术操作符" class="headerlink" title="算术操作符"></a>算术操作符</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>%</code>,<code>MOD</code></td>
<td align="left">模运算符</td>
</tr>
<tr>
<td align="left"><code>*</code></td>
<td align="left">乘法运算符</td>
</tr>
<tr>
<td align="left"><code>+</code></td>
<td align="left">加法运算符</td>
</tr>
<tr>
<td align="left"><code>-</code></td>
<td align="left">减号运算符</td>
</tr>
<tr>
<td align="left"><code>-</code></td>
<td align="left">更改参数的符号</td>
</tr>
<tr>
<td align="left"><code>/</code></td>
<td align="left">除法运算符</td>
</tr>
<tr>
<td align="left"><code>DIV</code></td>
<td align="left">整数除法</td>
</tr>
</tbody></table>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- mysql中+用于数字计算，不能用于字符串拼接
-- 字符串做运算，会将字符串转成数字相加
-- 字符串不是数值类型，就不能转具体的数字，就会转成0
-- true表示1，false表示0
-- null和任何数做运算都是null
select &quot;1&quot;+&quot;2&quot;; -- 3
select &quot;1&quot; + 2; -- 3
select &quot;a&quot; + 2; -- 2
select &quot;a&quot; + &quot;b&quot;; -- 0
-- 如果是数字开头的字符串转数字，只能将非数字字符串前面的数字字符串转成数值型
select &quot;2a&quot; + &quot;2b&quot;; -- 4
select &quot;2a2&quot; + &quot;2b2&quot;; -- 4
select &quot;a2&quot; + 2; -- 2
select true + 2; -- 3
select false + 2; -- 2
select &quot;a&quot; + true; -- 1
select null + 2; -- null
select null + &quot;a&quot;; -- null

-- mysql中除数是0，结果为null
select 1 &#x2F; 0; -- null
select -6 &#x2F; 3; -- -2.0000
select -5 &#x2F; 2; -- -2.5000
select -5 &#x2F; -2; -- 2.5000

-- div 表示整除，也就是取结果的整数部分
-- MySQL中的div才相当于java中的&#x2F;除法
select -6 div 3; -- -2
select -5 div 2; -- -2
select -5 div -2; -- 2

-- %结果的符号取决于被除数的符号
select 1 % 0; -- null
select 5 % 2; -- 1
select -5 % 2; -- -1
select -5 % -2; -- -1
select 5 % -2; -- 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h3><ul>
<li>abs(): 绝对值函数</li>
<li>ceil():向上取整</li>
<li>floor():向下取整</li>
<li>round():四舍五入</li>
<li>power(): 指数函数</li>
<li>pi():圆周率函数</li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select abs(-110); -- 110
select ceil(-3.11); -- -3
select floor(-3.11); -- -4
-- 绝对值的四舍五入加负号
select round(-3.11); -- -3
select round(-3.45); -- -3
select round(-3.5); -- -4

select power(2,3); -- 8

select pi(); -- 3.141593<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h3><ul>
<li><p>case语句</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 类似于java中的switch
CASE value WHEN compare_value THEN result [WHEN compare_value THEN result ...] [ELSE result] END

--  类似于java中的 if...else if
CASE WHEN condition THEN result [WHEN condition THEN result ...] [ELSE result] END<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询学生的信息，如果是male返回帅哥，如果是female就返回美女
select name,gender,
    case gender
	  when &quot;male&quot; then &quot;帅哥&quot;
		when &quot;female&quot; then &quot;美女&quot;
		else &quot;人渣&quot;
		end as info
	from student;
	
	
-- 查询学生的信息，如果是male返回帅哥，如果是female就返回美女
select name,gender,
   case 
	 when gender &#x3D; &quot;male&quot; then &quot;帅哥&quot;
	 when gender &#x3D; &quot;female&quot; then &quot;美女&quot;
	 else &quot;人渣&quot;
	 end as info
	 from student;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>if语句</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 类似于三目运算符
-- 如果expr1是TRUE (expr1 &lt;&gt; 0和expr1 IS NOT NULL)，则IF() 返回expr2。否则，它返回expr3.
IF(expr1,expr2,expr3)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">mysql&gt; SELECT IF(1&gt;2,2,3);
        -&gt; 3
mysql&gt; SELECT IF(1&lt;2,&#39;yes&#39;,&#39;no&#39;);
        -&gt; &#39;yes&#39;
mysql&gt; SELECT IF(STRCMP(&#39;test&#39;,&#39;test1&#39;),&#39;no&#39;,&#39;yes&#39;);
        -&gt; &#39;no&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>ifnull语句</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 如果expr1不是 NULL， 则IFNULL()返回 expr1；否则返回 expr2。
IFNULL(expr1,expr2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">mysql&gt; SELECT IFNULL(1,0);
        -&gt; 1
mysql&gt; SELECT IFNULL(NULL,10);
        -&gt; 10
mysql&gt; SELECT IFNULL(1&#x2F;0,10);
        -&gt; 10
mysql&gt; SELECT IFNULL(1&#x2F;0,&#39;yes&#39;);
        -&gt; &#39;yes&#39;
        
        
-- 将学生的年龄+10
select name,age,ifnull(age,0)+10 from db02.student;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>nullif语句 – 了解</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- Returns NULL if expr1 &#x3D; expr2 is true, otherwise returns expr1.
-- 如果expr1 &#x3D; expr2，返回null，否则返回expr1
NULLIF(expr1,expr2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">mysql&gt; SELECT NULLIF(1,1);
        -&gt; NULL
mysql&gt; SELECT NULLIF(1,2);
        -&gt; 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 返回字符串的长度（以字节为单位）
select length(&quot;java&quot;); -- 4
select length(&quot;我&quot;); -- 3

-- char_length(): 返回字符数量
select char_length(&quot;java&quot;); -- 4
select char_length(&quot;我&quot;); -- 1

-- concat()	返回连接的字符串
select concat(name,province) from student; 

-- concat_ws()	返回与分隔符连接
select concat_ws(&quot;,&quot;,name,province) from student;

-- find_in_set(): 第二个参数中第一个参数的索引（位置）
-- MySQL的索引从1开始
select find_in_set(&quot;b&quot;,&quot;a,b,c,d&quot;); -- 2

-- format(): 返回格式化为指定小数位数的数字
-- format会四舍五入
select format(3.1415926,3); -- 3.142

-- instr()	返回子字符串第一次出现的索引
-- 查找to在&quot;welcome to chengdu&quot;中第一次出现的索引
select instr(&quot;welcome to chengdu&quot;,&quot;to&quot;); -- 9

-- locate()	返回子字符串第一次出现的位置
select locate(&quot;to&quot;,&quot;welcome to chengdu&quot;); -- 9
-- 从位置10开始查找子串的索引
select locate(&quot;to&quot;,&quot;welcome to chengdu&quot;,10); -- 0

-- lcase()和lower()相同，返回小写
select lcase(&quot;JAVA&quot;); -- java

-- ucase()和upper()一样，返回大写
select ucase(&quot;java&quot;); -- JAVA

-- substr(str,pos,len): 返回指定的子字符串
select substr(&quot;welcome&quot;,1,3); -- wel
select substring(&quot;welcome&quot;,1,3);-- wel

-- trim()：删除前后空格
select trim(&quot;     hello &quot;);
select &quot;    hello &quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="日期时间函数"><a href="#日期时间函数" class="headerlink" title="日期时间函数"></a>日期时间函数</h3><p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html">https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html</a></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- CURRENT_DATE(),CURRENT_DATE,CURDATE():返回当前日期
select current_date();
select current_date;
select curdate();

-- CURRENT_TIME(),CURRENT_TIME,CURTIME():返回当前时间
select current_time();
select concat_ws(&quot; &quot;,current_date(),current_time()) as time;

-- CURRENT_TIMESTAMP(),CURRENT_TIMESTAMP,NOW():返回当前日期时间
select current_timestamp();
select now();

-- ADDDATE(): 将时间值（间隔）添加到日期值
-- 2天后
select adddate(now(),2);

-- 2天前
select adddate(now(),interval -2 day);
-- 2天后
select adddate(now(),interval 2 day);
-- 2年后
select adddate(now(),interval 2 year);
-- 2小时后
select adddate(now(),interval 2 hour);
-- 2分钟后
select adddate(now(),interval 2 minute);

-- ADDTIME(): 添加时间
-- ADDTIME()将expr2添加到expr1并返回结果。
-- 其中，Expr1为时间或datetime表达式，expr2为时间表达式。
select addtime(now(),&#39;2:10&#39;);

-- DATE(): 提取日期或日期时间表达式的日期部分
select date(now());
select date(create_time) from student;

-- DATE_ADD()	将时间值（间隔）添加到日期值
-- DATE_SUB()：从日期中减去时间值（间隔）
select date_add(now(),interval 2 day);

-- DATE_FORMAT(date,format): 日期格式化
select date_format(now(),&quot;%Y年%m月%d日 %H:%i:%s&quot;)

-- DATEDIFF():	两个日期之差
select datediff(now(),&#39;1990-10-10&#39;);

-- DAY(),DAYOFMONTH() 的同义词,返回月中的天
select day(now());
-- DAYNAME()	返回工作日的名称,返回星期的名字
select dayname(now());

-- DAYOFWEEK()	返回参数的工作日索引
-- 周日是第一天
select dayofweek(now());

-- EXTRACT(unit from date)：提取日期的一部分
select extract(year from now());

-- QUARTER()	从日期参数返回季度
select quarter(now());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="转换函数-了解"><a href="#转换函数-了解" class="headerlink" title="转换函数  - 了解"></a>转换函数  - 了解</h3><ul>
<li><code>CAST(expr AS </code>type<code>)</code><ul>
<li>*允许的<code>type</code>*类型<ul>
<li>BINARY[(<em><code>N</code></em>)]</li>
<li>CHAR[(<em><code>N</code></em>)]</li>
<li>DATE</li>
<li>DATETIME[(<em><code>M</code></em>)]</li>
<li>DECIMAL[(<em><code>M</code></em>[,<em><code>D</code></em>])]</li>
<li>TIME[(<em><code>M</code></em>)]</li>
<li>SIGNED [INTEGER]</li>
<li>UNSIGNED [INTEGER]</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- cast 转换函数
select locate(&#39;0&#39;,cast(110 as char));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="位运算-了解"><a href="#位运算-了解" class="headerlink" title="位运算 - 了解"></a>位运算 - 了解</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-and"><code>&amp;</code></a></td>
<td align="left">按位与</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_right-shift"><code>&gt;&gt;</code></a></td>
<td align="left">右移</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_left-shift"><code>&lt;&lt;</code></a></td>
<td align="left">左移</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-xor"><code>^</code></a></td>
<td align="left">按位异或</td>
</tr>
<tr>
<td align="left">[&#96;</td>
<td align="left">&#96;](<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-or">https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-or</a>)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-invert"><code>~</code></a></td>
<td align="left">位反转</td>
</tr>
</tbody></table>
<h3 id="加密函数"><a href="#加密函数" class="headerlink" title="加密函数"></a>加密函数</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- md5加密
select md5(111);
-- password()	计算并返回密码字符串
select password(123456);-- *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- INET_ATON()：返回 IP 地址的数值
 SELECT INET_ATON(&#39;10.0.5.9&#39;); -- 167773449
 
-- INET_NTOA():	从数值返回 IP 地址
SELECT INET_NTOA(167773449);-- 10.0.5.9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="信息函数"><a href="#信息函数" class="headerlink" title="信息函数"></a>信息函数</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- DATABASE()	返回默认（当前）数据库名称
select database();

-- VERSION()	返回一个表示 MySQL 服务器版本的字符串
select version();

-- 使用MySQL命令查看版本
C:\Users\NINGMEI&gt;mysql --version
mysql  Ver 14.14 Distrib 5.7.38, for Win64 (x86_64
C:\Users\NINGMEI&gt;mysql -V
mysql  Ver 14.14 Distrib 5.7.38, for Win64 (x86_64)

-- USER()	客户端提供的用户名和主机名
select user(); -- root@localhost<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="单行函数的特点"><a href="#单行函数的特点" class="headerlink" title="单行函数的特点"></a>单行函数的特点</h2><ul>
<li><p>以上所讲的函数都是单行函数，也就是以上的函数会<strong>作用在表中每一行数据，一行数据返回一个结果。</strong></p>
</li>
<li><p>单行函数<strong>可以在select或where后面</strong></p>
</li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select name,char_length(name) from student;
select name from student where char_length(name) &#x3D; 3;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="order-by子句"><a href="#order-by子句" class="headerlink" title="order by子句"></a>order by子句</h2><p>order by …  按照 … 排序</p>
<p>ascend:(默认)  升序</p>
<p>descend： 降序</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- student按照年龄升序
select * from student order by age;
select * from student order by age asc;

-- student按照年龄降序
select * from student order by age desc;

-- student按照年龄升序,sid降序
-- sid降序的前提是年龄相同
select * from student order by age asc , sid desc;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="limit-子句"><a href="#limit-子句" class="headerlink" title="limit 子句"></a>limit 子句</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- offset 表示偏移量，跳过多少条数据，省略不写就是0
-- row_count 行数
LIMIT &#123;[offset,] row_count&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 按照学生的age降序，取出前3条
select * from student order by age desc limit 3;

-- 按照学生的age降序，从第2条开始获取3条数据
select * from student order by age desc limit 1,3;

-- 分页查询
-- 一共8条数据
-- 每页显示3条，分页显示
-- limit (页码 - 1) * 每页需要显示的条数 ,每页需要显示的条数
select * from student order by age desc limit 0,3; -- 第一页
select * from student order by age desc limit 3,3; -- 第二页
select * from student order by age desc limit 6,3; -- 第三页<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="建表的时候自动更新时间"><a href="#建表的时候自动更新时间" class="headerlink" title="建表的时候自动更新时间"></a>建表的时候自动更新时间</h2><p><strong>注意:</strong> 以后在设计MySQL业务表的时候，无论业务需求中是否要求时间字段，都<strong>建议大家设置一个创建时间和更新时间的字段。</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建学生表
create table if not exists student (
  _id bigint primary key auto_increment,
	sid int unsigned not null unique,
	name varchar(12) not null,
	age int,
	gender char(6) default &#39;male&#39;,
	province text,
	create_time datetime default now(),
    -- on update 表示数据更新的时候，时间也会自动更新 【成倍增长】主键和唯一性不能插入
	update_time datetime default now() on update now()
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 复制表结构
create table student01 like student;

-- 复制表结构和数据
create table student02 as select * from student;

-- 将查询得到的数据插入表中
insert into student01 select * from student;

-- insert into ... select 可以做蠕虫复制
insert into test select * from test;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="group-by子句"><a href="#group-by子句" class="headerlink" title="group by子句"></a>group by子句</h2><p>group by … 按照…分组</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 按照职位分组
-- 使用分组后，select 后面的投影字段需要使用分组字段，不是分组字段作为投影没有意义
select * from emp group by job;
-- 使用分组字段作为投影字段
select job from emp group by job;

-- 学生按照省份和性别分组
select province,gender from db01.student group by province,gender;

-- 使用分组去重 - 小技巧
-- 分组的目的：是为了数据的统计分析<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="聚合函数-多行函数-x2F-分组函数-aggregate-functions"><a href="#聚合函数-多行函数-x2F-分组函数-aggregate-functions" class="headerlink" title="聚合函数(多行函数&#x2F;分组函数) - aggregate-functions"></a>聚合函数(多行函数&#x2F;分组函数) - aggregate-functions</h2><ul>
<li>count(字段)&#x2F;count(常量值)&#x2F;count(*)： 返回返回的行数</li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 统计员工的总人数
-- count(*) 不会忽略null值
select count(*) as num from emp;
-- count(常量值) 不会忽略null值
select count(0) as num from emp;
-- count(字段) 会忽略指定字段的null值
select count(mgr) as num from emp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/images/MySQL.assets/1658373236784.png" alt="1658373236784"></p>
<ul>
<li><p>sum(字段)：返回总和</p>
</li>
<li><p>max(): 返回最大值</p>
</li>
<li><p>min(): 返回最小值</p>
</li>
<li><p>avg():返回参数的平均值</p>
</li>
<li><p>group_concat():返回一个连接的字符串</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">GROUP_CONCAT([DISTINCT] expr [,expr ...]
             [ORDER BY &#123;unsigned_integer | col_name | expr&#125;
                 [ASC | DESC] [,col_name ...]]
             [SEPARATOR str_val])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 统计每种职位的工资总额
select job,sum(sal) from emp group by job;

-- 统计每种职位的平均工资
select job,format(avg(sal),2) from emp group by job;

-- 统计每种职位的平均工资
select job,sum(sal)&#x2F;count(sal) from emp group by job;

-- 统计每种职位的最高工资
select job,max(sal) from emp group by job;

-- 统计每种职位的最低工资
select job,min(sal) from emp group by job;

-- 统计每种职位的所有工资					 
select job,group_concat(sal order by sal desc separator &#39;,&#39;) from emp group by job;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="聚合函数的特点"><a href="#聚合函数的特点" class="headerlink" title="聚合函数的特点"></a>聚合函数的特点</h3><ol>
<li><strong>聚合多行数据得到一个结果</strong></li>
<li><strong>聚合函数不能使用在where后面，只能用在select和having后面</strong></li>
</ol>
<h2 id="having-子句"><a href="#having-子句" class="headerlink" title="having 子句"></a>having 子句</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询人数超过2人的职位有哪些
select job,count(*) as sum from emp group by job having sum &gt; 2;

-- 过滤原始数据再进入内存
select * from emp where sal &gt; 1000;
-- 进入内存再过滤
select * from emp having sal &gt; 1000;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="where-和-having的区别"><a href="#where-和-having的区别" class="headerlink" title="where 和 having的区别"></a>where 和 having的区别</h2><ol>
<li><strong>where过滤的是原始数据；having过滤的是内存数据</strong></li>
<li><strong>where能做的having都能做；反之不成立。但是能用where的优先使用where,可以减少加载到内存的数据</strong></li>
<li><strong>where后面不能使用别名和聚合函数；having可以</strong></li>
</ol>
</li>
</ul>
<h2 id="连接查询（多表查询）-SQL92"><a href="#连接查询（多表查询）-SQL92" class="headerlink" title="连接查询（多表查询）- SQL92"></a>连接查询（多表查询）- SQL92</h2><h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><ul>
<li><p><strong>笛卡尔积：表1有m条数据，表2有n条数据，笛卡尔积就是用表1的每一条数据匹配表2中的所有数据，结果就是m*n条数据</strong></p>
</li>
<li><p><strong>自连接：就是一张表当成两张表使用</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询员工及其领导
select  e1.ename,e2.ename
    from emp as e1,emp as e2
		-- 连接条件
		where e1.mgr &#x3D; e2.empno;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><strong>等值连接：连接条件使用&#x3D;</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询员工和部门名称
select e.ename,d.dname
   from emp e , dept d
	 where e.deptno &#x3D; d.deptno;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><strong>不等值连接：连接条件没有使用&#x3D;</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询员工的工资等级
select e.ename,e.sal,s.grade
   from emp e, salgrade s
	 where e.sal between s.losal and s.hisal;
	 
	 
-- 查询员工和部门名称、工资等级
-- 连接条件的数量 &#x3D; 连接的表数量 - 1
select e.ename,e.sal,d.dname,s.grade
    from emp e,dept d, salgrade s
		where e.deptno &#x3D; d.deptno and e.sal between s.losal and s.hisal;
		
-- 查询工资大于1000的员工和部门名称、工资等级
select e.ename,e.sal,d.dname,s.grade
    from emp e,dept d, salgrade s
        -- 过滤条件
		where e.sal &gt; 1000 
		-- 连接条件
		and e.deptno &#x3D; d.deptno 
		and e.sal between s.losal and s.hisal;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h3 id="内连接的特点"><a href="#内连接的特点" class="headerlink" title="内连接的特点"></a>内连接的特点</h3><ul>
<li>只会返回匹配成功的数据，没有匹配上的数据不显示</li>
</ul>
<p><strong>SQL92语法将连接条件放在where中，但是where还有过滤原始数据的功能，所以代码耦合了。所以出现了sql99语法，在SQL99中将连接条件独立出来了。</strong></p>
<h2 id="连接查询（多表查询）-SQL99"><a href="#连接查询（多表查询）-SQL99" class="headerlink" title="连接查询（多表查询）- SQL99"></a>连接查询（多表查询）- SQL99</h2><h3 id="内连接-inner-join"><a href="#内连接-inner-join" class="headerlink" title="内连接 - inner join"></a>内连接 - inner join</h3> <pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询员工及其领导 -- 自连接
select  e1.ename as emp,e2.ename as leader
   from emp e1 join emp e2
	 on e1.mgr &#x3D; e2.empno;

-- 查询员工和部门名称 -- 等值连接
-- inner可以省略
select e.ename,d.dname
    from emp e inner join dept d
		on e.deptno &#x3D; d.deptno;

-- 查询工资大于1000的员工和部门名称、工资等级
select e.ename,e.sal,d.dname,s.grade
   from emp e join dept d
	 -- 连接条件
	 on e.deptno  &#x3D; d.deptno
	 join salgrade s
	 -- 连接条件
	 on e.sal between s.losal and s.hisal
	 -- 过滤条件
	 -- where后可以使用表的别名，不能使用字段别名
	 where e.sal &gt; 1000 ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/images/MySQL.assets/%E8%87%AA%E8%BF%9E%E6%8E%A5.png"></p>
<p><strong>内连接：只会返回匹配成功的数据，没有匹配上的数据不显示</strong></p>
<h3 id="外连接-outer-join"><a href="#外连接-outer-join" class="headerlink" title="外连接 - outer join"></a>外连接 - outer join</h3><blockquote>
<p><strong>外连接区分主表和从表</strong></p>
<p><strong>特点：主表的数据无论匹配是否成功都会显示，从表的数据匹配成功就显示数据，否则就是null</strong></p>
<p>left join 左边的表就是主表，右边的表就是从表</p>
<p>right join 右边的表就是主表，左边的表就是从表</p>
<p>所以基于以上的规则：<strong>left join  和  right join  通过交换主从表的关系可以达到一样的效果</strong></p>
</blockquote>
<h4 id="左外连接-left-join"><a href="#左外连接-left-join" class="headerlink" title="左外连接 - left join"></a>左外连接 - left join</h4><h4 id="右外连接-–-right-join"><a href="#右外连接-–-right-join" class="headerlink" title="右外连接 – right join"></a>右外连接 – right join</h4><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询所有员工及其领导，没有领导的员工也要显示
select e1.ename,e2.ename
  -- e1是主表，e2是从表
  from emp e1 left join emp e2
	on e1.mgr &#x3D; e2.empno;
	
select e1.ename,e2.ename
  -- e1是主表，e2是从表
  from emp e2 right join emp e1
	on e1.mgr &#x3D; e2.empno;
	
-- 查询工资大于1000的员工和部门名称、工资等级
select e.ename,e.sal,d.dname,s.grade
   from emp e left join dept d
	 -- 连接条件
	 on e.deptno  &#x3D; d.deptno
	 left join salgrade s
	 -- 连接条件
	 on e.sal between s.losal and s.hisal
	 -- 过滤条件
	 where e.sal &gt; 1000 ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="交叉连接、自然连接、using子句"><a href="#交叉连接、自然连接、using子句" class="headerlink" title="交叉连接、自然连接、using子句"></a>交叉连接、自然连接、using子句</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 交叉连接：查询出来的结果是两张表中数据的乘积
-- 交叉连接也是内连接
select e.*,d.*
 from emp e
 cross join dept d
 on e.deptno &#x3D; d.deptno;

-- 自然连接
-- Natural join基于两个表中的全部同名列建立连接
-- 弊端：连接条件不灵活
select e.*,d.*
 from emp e natural join dept d;
 
 -- using子句
 -- 如果连接条件的字段名一样，可以使用using子句
select e.ename,d.dname
    from emp e inner join dept d
		using(deptno);

select e.ename,d.dname
    from emp e inner join dept d
		on e.deptno &#x3D; d.deptno;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>子查询：就是其他语句中包含的select语句</p>
<blockquote>
<p>注意：</p>
<p>1.子查询必须写在（）内</p>
<p><strong>2.子查询在from后面当作表使用，必须有别名</strong></p>
</blockquote>
<h3 id="单行子查询"><a href="#单行子查询" class="headerlink" title="单行子查询"></a>单行子查询</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查得所有比“CLARK”工资高的员工的信息
-- 1. 查询“CLARK”工资
select sal from emp where ename &#x3D; &#39;CLARK&#39;;
-- 2. 查询所有员工的工资和1中的结果比较
select ename,sal from emp where sal &gt; (select sal from emp where ename &#x3D; &#39;CLARK&#39;);

-- 查询工资最高的雇员名字和工资。
-- 1. 查询最高工资
select max(sal) from emp;
-- 2. 查询所有员工的工资等于1的结果
select * from emp where sal &#x3D; (select max(sal) from emp);

-- 查询职务和SCOTT相同，比SCOTT雇佣时间早的雇员信息
-- 1. 查询出SCOTT的职务
select job from emp where ename &#x3D; &quot;SCOTT&quot;;
-- 2. 查询出SCOTT的雇佣时间
select hiredate from emp where ename &#x3D; &quot;SCOTT&quot;;
-- 3. 查询所有员工职务等于1的结果，雇佣时间小于2的结果
select * from emp where job &#x3D; (select job from emp where ename &#x3D; &quot;SCOTT&quot;)
and hiredate &lt; (select hiredate from emp where ename &#x3D; &quot;SCOTT&quot;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a>多行子查询</h3><p>多行子查询返回多行记录</p>
<p>对多行子查询只能使用多行记录比较运算符</p>
<p><strong>ALL 和子查询返回的所有值比较</strong></p>
<p><strong>ANY 和子查询返回的任意一个值比较; SOME是ANY的别名</strong></p>
<p><strong>IN 等于列表中的任何一个</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 查询工资低于任意一个&#39;CLERK&#39;的工资的雇员信息。
-- 1. 查询出所有&#39;CLERK&#39;的工资
select sal from emp where job &#x3D; &#39;CLERK&#39;;
-- 2. 查询所有员工的工资低于1中任意一个值
select * from emp where sal &lt;any (select sal from emp where job &#x3D; &#39;CLERK&#39;);

-- 查询工资低于任意一个&#39;CLERK&#39;的工资的雇员信息。
select * from emp where sal &lt; (select max(sal) from emp where job &#x3D; &#39;CLERK&#39;);

-- 查询工资比所有的 &#39;SALESMAN&#39;都高的雇员的编号、名字和工资。
-- 1. 查询出所有&#39;SALESMAN&#39;的工资
select sal from emp where job &#x3D; &#39;SALESMAN&#39;;
-- 2. 查询所有员工的工资高于1中所有值
select * from emp where sal &gt;all(select sal from emp where job &#x3D; &#39;SALESMAN&#39;);

-- 查询部门20中职务同部门10的雇员一样的雇员信息。
-- 1.查询部门10中职务有哪些
select job from emp where deptno &#x3D; 10;
-- 2.查询部门20中职务在1的结果中的
select * from emp where deptno &#x3D; 20 and job in (select job from emp where deptno &#x3D; 10);

-- 查询在雇员中有哪些人是领导
-- 1. 查询出领导的员工编号
select mgr from emp;
-- 2. 查询员工的编号在1的结果中的
select * from emp where empno in (select mgr from emp);

-- 找出部门编号为20的所有员工中收入最高的职员
-- 1. 查询部门编号为20的所有员工最高工资
select max(sal) from emp where deptno &#x3D; 20;
-- 2. 查询部门编号为20的所有员工工资等于1的结果的
select * from emp where deptno &#x3D; 20 and sal &#x3D; (select max(sal) from emp where deptno &#x3D; 20);

-- 找出部门编号为20的所有员工中收入最高的职员
select * from emp
where sal &gt;&#x3D; all(
		select sal from emp where deptno &#x3D; 20)
and deptno &#x3D; 20


-- 查询每个部门平均薪水的等级
-- 1. 查询每个部门平均薪水
select avg(sal) from emp group by deptno;
-- 2. 将1的结果和工资等级进行连接查询
select e.avg,s.grade
-- 子查询在from后面当作表使用，必须有别名
  from (select avg(sal) as avg from emp group by deptno) e
  join salgrade s
	on  e.avg between s.losal and s.hisal;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="相关子查询"><a href="#相关子查询" class="headerlink" title="相关子查询"></a>相关子查询</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- exists(select语句)： 相关子查询
-- 外部的查询是否返回数据取决于 select子查询语句
-- select子查询语句有结果，外部查询就会执行返回结果；否则外部查询没有返回结果
-- 最终的结果只有外部查询的，内部查询的结果是不会显示的。
-- 内部查询在这里仅仅是一个开关
select * from emp where exists (select * from emp where sal &gt; 10000);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h2><p>将多个select语句联合(合并)为一个select语句，涉及的关键字union 和union all。</p>
<p>union all 不管是否重复，全部合并</p>
<p>union 如果有重复的，过滤掉重复的</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 将两个select的结果组成一张虚拟表
select * from emp where sal &gt; 1000
union all
select * from emp where job &#x3D; &#39;SALESMAN&#39;;

-- 将两个select的结果组成一张虚拟表，相同的数据去重
select * from emp where sal &gt; 1000
union
select * from emp where job &#x3D; &#39;SALESMAN&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="视图-View"><a href="#视图-View" class="headerlink" title="视图 - View"></a>视图 - View</h2><p>视图是从若干基本表和（或）其他视图构造出来的表。也就是说视图也是表，<strong>是一张虚拟表</strong>。</p>
<p><strong>操作视图的数据其实还是操作的是基本表的数据</strong></p>
<h3 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE
    [OR REPLACE]
    VIEW view_name [(column_list)]
    AS select_statement<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建视图
create view emp_view as select empno,ename,job,mgr,hiredate,deptno from emp;

-- 如果不存在就创建；存在就替换
create or replace view emp_view as select empno,ename,job,mgr,deptno from emp;


-- 操作视图其实操作的是原始数据
update emp_view set job &#x3D; &quot;SALESMAN&quot; where ename &#x3D;&quot;smith&quot;;
delete from emp where ename &#x3D;&quot;smith&quot;;

-- 聚合函数生成的视图不能增加、删除、修改数据
create or replace view emp_view01 as select max(sal) as max_sal from emp;

update emp_view01 set max_sal &#x3D; 10000;

delete from emp_view01;

insert into emp_view01 values(10000);

-- 删除视图
drop view emp_view01;

-- 查询当前所有的数据库
show databases;
-- 查询当前库下的所有表
show tables;
-- 查询所有表及其类型
show full tables;
-- 查询指定数据库的所有表
show tables from db01;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="视图的总结"><a href="#视图的总结" class="headerlink" title="视图的总结"></a>视图的总结</h3><ol>
<li><p><strong>视图对应一个查询语句</strong>；视图是（从若干基本表和（或）其他视图构造出来的）表</p>
</li>
<li><p>视图进行查询，添加，修改，删除，其实<strong>就是对背后的表进行相应操作</strong></p>
</li>
<li><p><strong>视图是虚拟表，在创建一个视图时，只是存放的视图的定义，也即是动态检索数据的查询语句，而并不存放视图对应的数据</strong></p>
</li>
<li><p><strong>视图的好处</strong></p>
<ul>
<li>安全 <strong>可以只显示部分行部分列的数据</strong>;可以对添加的数据进行检查；可以设置为只读视图</li>
<li>操作简单 </li>
<li>只显示多个数据库表的部分列，部分行的视图</li>
<li><strong>聚合函数生成的视图不能增加、删除、修改数据</strong></li>
</ul>
</li>
</ol>
<h2 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SHOW ENGINES;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="/images/MySQL.assets/image-20220402143925195.png" alt="image-20220402143925195"></p>
<p><strong>Innodb支持事务和外键；MyISAM不支持事务和外键</strong></p>
<h2 id="MySQL事务-transaction"><a href="#MySQL事务-transaction" class="headerlink" title="MySQL事务 - transaction"></a>MySQL事务 - transaction</h2><p>事务：完成一个事情需要的一系列步骤(操作)，这些操作要么同时成功，要么同时失败</p>
<p><strong>在MySQL中DML一条语句就是一个事务，且事务自动提交的。</strong></p>
<p>在实际开发中有时候我们需要将多条语句变成一个整体，<strong>他们要么都成功，要么都是失败。此时就需要将多条语句做成一个事务。</strong></p>
<h3 id="事务的基本操作"><a href="#事务的基本操作" class="headerlink" title="事务的基本操作"></a>事务的基本操作</h3><p>1 开启事务</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">start transaction;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>2 提交事务</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">commit;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>3 回滚事务</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">rollback;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>注意：一旦使用start transaction;开启事务那么自动提交将失效</p>
<p> 如果所有操作都正常执行使用commit;提交事务</p>
<p> <strong>当发生异常情况回滚事务，数据(此时为tb_account表)通常回滚到开启事务之前的状态</strong></p>
<p><strong>无论提交还是回滚事务，事务都会结束。</strong></p>
<h3 id="转账案例"><a href="#转账案例" class="headerlink" title="转账案例"></a>转账案例</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 张三给李四转100元
-- 开启事务
start transaction;
  update account set money &#x3D; money - 100 where name &#x3D; &#39;zhangsan&#39;;
  update account set money &#x3D; money + 100 where name &#x3D; &#39;lisi&#39;;
commit; -- 提交事务，事务结束
rollback; -- 回滚事务，事务结束<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>事务是用来控制DML语句的。DQL不会修改原始数据，所以DQL不需要事务。</p>
<h3 id="事务的ACID四大特性"><a href="#事务的ACID四大特性" class="headerlink" title="事务的ACID四大特性"></a>事务的ACID四大特性</h3><ul>
<li><p>原子性(Atomicity): <strong>事务中的语句不可再分，是一个整体</strong>。要么同时成功，要么同时失败</p>
</li>
<li><p>一致性(Consistency)： <strong>事务执行前和事务执行后数据是一致的</strong>。比如转帐前总计金额是1300；转账后总计金额是1300</p>
</li>
<li><p>隔离性(Isolation): <strong>事务之间是彼此隔离的，一个事务的操作不会影响另一个事务。但是隔离性受隔离级别的影响。</strong></p>
</li>
<li><p>持久性(Durability)：<strong>事务一旦提交就会将数据写入文件持久化存储。</strong></p>
</li>
</ul>
<h3 id="事务的隔离级别-理解"><a href="#事务的隔离级别-理解" class="headerlink" title="事务的隔离级别 - 理解"></a>事务的隔离级别 - 理解</h3><table>
<thead>
<tr>
<th>事务隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>读未提交（read-uncommitted）</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>读已提交（read-committed）</td>
<td>否</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>可重复读（repeatable-read）</td>
<td>否</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>串行化（serializable）</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
</tbody></table>
<ul>
<li>读未提交（read-uncommitted）<ul>
<li>事务1修改了数据但是还没有提交，此时事务2就读取到了事务1还没有提交的数据。</li>
<li><strong>会产生脏读</strong>。解决办法：提升隔离级别</li>
</ul>
</li>
<li>读已提交（read-committed）<ul>
<li>开启事务1和事务2，事务1和事务2读取到了表中原来的数据，此时事务1修改了表中的数据，并提交事务。<strong>事务2在同一次事务中读到了不同的数据。</strong></li>
<li>解决了脏读，但是出现了<strong>不可重复读</strong></li>
<li>不可重复读： 就是在同一次事务中读取到的数据不相同</li>
<li><strong>如何解决不可重复读:提升隔离级别</strong></li>
</ul>
</li>
<li>可重复读（repeatable-read）<ul>
<li>开启事务1和事务2,无论事务1是否提交事务,事务2读取到的数据都是一样.</li>
<li>解决了不可重复读, 但是出现了<strong>幻读</strong></li>
<li>解决幻读。解决办法：提升隔离级别</li>
</ul>
</li>
<li>串行化（serializable）<ul>
<li>事务加锁了,事务只能串行执行了.</li>
<li>安全性最高,效率最低</li>
</ul>
</li>
</ul>
<p><strong>MySQL默认的隔离级别是可重复读（repeatable-read）</strong></p>
<ul>
<li><p>查询隔离级别</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select @@tx_isolation;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置隔离级别</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">set session transaction isolation level  READ UNCOMMITTED;
set session transaction isolation level  READ COMMITTED;
set session transaction isolation level  REPEATABLE READ;
set session transaction isolation level  serializable;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h2 id="数据库设计原则-三范式"><a href="#数据库设计原则-三范式" class="headerlink" title="数据库设计原则 - 三范式"></a>数据库设计原则 - 三范式</h2><h3 id="概念（NF-x3D-NormalForm）"><a href="#概念（NF-x3D-NormalForm）" class="headerlink" title="概念（NF&#x3D; NormalForm）"></a>概念（NF&#x3D; NormalForm）</h3><p>遵循一定的规则。在关系型数据库中这种规则就称为范式</p>
<h3 id="三范式的作用"><a href="#三范式的作用" class="headerlink" title="三范式的作用"></a>三范式的作用</h3><ul>
<li>结构合理</li>
<li>冗余较小</li>
</ul>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li><p>性能降低</p>
</li>
<li><p>多表查询比单表查询速度慢</p>
</li>
</ul>
<h3 id="第一范式"><a href="#第一范式" class="headerlink" title="第一范式"></a>第一范式</h3><p> <strong>必须要有主键，字段不可再分</strong></p>
<p><img src="/images/MySQL.assets/image-20220402155135097.png" alt="image-20220402155135097"></p>
<p>以上的表就不满足第一范式，虽然有主键，但是address可以再分。修改如下：</p>
<p><img src="/images/MySQL.assets/image-20220402155327349.png" alt="image-20220402155327349"></p>
<h3 id="第二范式"><a href="#第二范式" class="headerlink" title="第二范式"></a>第二范式</h3><p><strong>在第一范式的基础上，需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。</strong></p>
<p><strong>（非主键字段必须全部依赖主键字段，而不能部分依赖）</strong></p>
<p>学号和课程编号作为联合主键</p>
<p>课程名称只依赖于课程编号，而和学号没有关系</p>
<p><img src="/images/MySQL.assets/wps1.jpg" alt="img"></p>
<p>分析以上的设计发现数据冗余。学生只依赖主键中的学号；课程名称只依赖主键中的课程编号。违背第二范式。修改如下：</p>
<p>学生表</p>
<p><img src="/images/MySQL.assets/wps2.jpg" alt="img"> </p>
<p>2，课程表</p>
<p><img src="/images/MySQL.assets/wps3.jpg" alt="img"> </p>
<p>3，选课表</p>
<p><img src="/images/MySQL.assets/wps4.jpg" alt="img"> </p>
<h3 id="第三范式"><a href="#第三范式" class="headerlink" title="第三范式"></a>第三范式</h3><p><strong>在第二范式的基础上，确保数据表中的每一列数据都和主键直接相关，而不能间接相关。</strong></p>
<p><strong>（非主键字段必须直接依赖主键字段，不能间接依赖）</strong></p>
<p><img src="/images/MySQL.assets/wps5.jpg" alt="img"></p>
<p>以上数据冗余。班级名称和班级信息直接依赖班级编号，班级编号直接依赖主键学号，所以班级名称和班级信息间接依赖了主键学号。所以违背了第三范式。</p>
<p>修改如下：</p>
<p><strong>学生表</strong></p>
<p><img src="/images/MySQL.assets/wps6.jpg" alt="img"> </p>
<p><strong>班级表</strong></p>
<p><img src="/images/MySQL.assets/wps7.jpg" alt="img"></p>
<h2 id="MySQL用户管理和权限"><a href="#MySQL用户管理和权限" class="headerlink" title="MySQL用户管理和权限"></a>MySQL用户管理和权限</h2><blockquote>
<p>在MySQL中用户的唯一标识是： <code>&#39;用户名&#39;@&#39;主机名&#39;</code></p>
<p>用户名：就是创建的用户的名字</p>
<p>主机名：指定该用户在哪个主机上可以登陆。localhost表示该用户只能在本机登录。<strong>如果想让该用户可以从任意远程主机登陆，可以使用通配符%</strong></p>
</blockquote>
<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE USER [IF NOT EXISTS]
    user [auth_option] [, user [auth_option]] ...
    [password_option | lock_option] ...

auth_option: &#123;
    IDENTIFIED BY &#39;auth_string&#39;
  | IDENTIFIED WITH auth_plugin
  | IDENTIFIED WITH auth_plugin BY &#39;auth_string&#39;
  | IDENTIFIED WITH auth_plugin AS &#39;auth_string&#39;
  | IDENTIFIED BY PASSWORD &#39;auth_string&#39;
&#125;

password_option: &#123;
    PASSWORD EXPIRE
  | PASSWORD EXPIRE DEFAULT
  | PASSWORD EXPIRE NEVER
  | PASSWORD EXPIRE INTERVAL N DAY
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建zhangsan用户
-- &#39;zhangsan&#39;@&#39;localhost&#39; 表示张三只能在本地连接数据库
create user &#39;zhangsan&#39;@&#39;localhost&#39; identified by &#39;123456&#39;;

-- &#39;zhangsan&#39;@&#39;%&#39; 表示张三只能在任意的主机上远程连接数据库
-- 无主机登录
create user &#39;zhangsan&#39;@&#39;%&#39; identified by &#39;123456&#39;;

-- 刷新权限
flush privileges;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="修改用户"><a href="#修改用户" class="headerlink" title="修改用户"></a>修改用户</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">ALTER USER [IF EXISTS]
    user [auth_option] [, user [auth_option]] ...

ALTER USER [IF EXISTS]
    USER() IDENTIFIED BY &#39;auth_string&#39;


auth_option: &#123;
    IDENTIFIED BY &#39;auth_string&#39;
  | IDENTIFIED WITH auth_plugin
  | IDENTIFIED WITH auth_plugin BY &#39;auth_string&#39;
  | IDENTIFIED WITH auth_plugin AS &#39;auth_string&#39;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 修改用户的密码
alter user &#39;zhangsan&#39;@&#39;%&#39; identified by &#39;234567&#39;;

-- 刷新权限
flush privileges;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DROP USER [IF EXISTS] user [, user] ...<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 删除用户
drop user &#39;zhangsan&#39;@&#39;%&#39;;

-- 刷新权限
flush privileges;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">GRANT
    priv_type [(column_list)]
      [, priv_type [(column_list)]] ...
    ON  priv_level
    TO user [auth_option] [, user [auth_option]] ...
   

priv_level: &#123;
  *.*
  | db_name.*
  | db_name.tbl_name
&#125;

auth_option: &#123;
    IDENTIFIED BY &#39;auth_string&#39;
  | IDENTIFIED WITH auth_plugin
  | IDENTIFIED WITH auth_plugin BY &#39;auth_string&#39;
  | IDENTIFIED WITH auth_plugin AS &#39;auth_string&#39;
  | IDENTIFIED BY PASSWORD &#39;auth_string&#39;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 授权
-- 给用户&#39;zhangsan&#39;@&#39;%&#39;授予所有库下所有被的所有操作权限
grant all on *.* to &#39;zhangsan&#39;@&#39;%&#39; identified by &#39;234567&#39;;

-- 刷新权限
flush privileges;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="取消授权"><a href="#取消授权" class="headerlink" title="取消授权"></a>取消授权</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">REVOKE
    priv_type [(column_list)]
      [, priv_type [(column_list)]] ...
    ON [object_type] priv_level
    FROM user [, user] ...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 取消授权
revoke all on *.* from &#39;zhangsan&#39;@&#39;%&#39; ;
-- 刷新权限
flush privileges;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="MySQL索引"><a href="#MySQL索引" class="headerlink" title="MySQL索引"></a>MySQL索引</h2><p>索引（index）: MySQL存储引擎为了<strong>提高查询效率</strong>而设计的一种数据结构。</p>
<p>索引相当于 字典中的索引目录。</p>
<h3 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h3><ul>
<li><p>主键索引：primary key</p>
</li>
<li><p>唯一索引:  unique</p>
</li>
<li><p>普通索引（单列索引，单值索引）: 就是给一个字段添加索引</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE [UNIQUE | FULLTEXT | SPATIAL] INDEX index_name
    ON tbl_name (key_part,...)
    [index_option]
    [algorithm_option | lock_option] ...

key_part:
    col_name [(length)] [ASC | DESC]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 创建表的时候，创建索引
create table test01(
  id int primary key,
	name char(10),
	age tinyint unsigned,
	gender char(6),
	-- 创建普通索引
	key(name)
);

-- 表已经存在，创建索引
-- 给test表的name字段创建索引
create index index_name on test (name);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>复合索引：多个字段联合作为索引字段</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table test02(
  id int primary key,
	name char(10),
	age tinyint unsigned,
	address char(10),
	gender char(6),
	-- 创建复合索引
	key(name,age,address)
);

insert into test02 values(1,&#39;zhangsan&#39;,20,&#39;beijing&#39;,&#39;male&#39;);
insert into test02 values(5,&#39;lisi&#39;,21,&#39;tianjin&#39;,&#39;male&#39;);
insert into test02 values(2,&#39;wangwu&#39;,22,&#39;beijing&#39;,&#39;male&#39;);
insert into test02 values(4,&#39;zhaosi&#39;,20,&#39;shanghai&#39;,&#39;male&#39;);
insert into test02 values(3,&#39;lily&#39;,23,&#39;chengdu&#39;,&#39;female&#39;);

-- 复合索引原则：
-- 最左前缀匹配
-- MySQL为了更好的使用索引，所以在使用索引字段的时候会调整顺序
explain select * from test02 where name &#x3D; &#39;lisi&#39;; -- ok
explain select * from test02 where name &#x3D; &#39;lisi&#39; and age &#x3D; 22; -- ok
explain select * from test02 where name &#x3D; &#39;lisi&#39; and age &#x3D; 22 and address &#x3D; &#39;chengdu&#39;; -- ok 
explain select * from test02 where name &#x3D; &#39;lisi&#39; and address &#x3D; &#39;chengdu&#39;; -- ok

explain select * from test02 where name &#x3D; &#39;lisi&#39; and address &#x3D; &#39;chengdu&#39; and age &#x3D; 22; -- ok

explain select * from test02 where address &#x3D; &#39;chengdu&#39; and name &#x3D; &#39;lisi&#39; and age &#x3D; 22 ; -- ok
explain select * from test02 where age &#x3D; 22 and address &#x3D; &#39;chengdu&#39; and name &#x3D; &#39;lisi&#39;;

-- 因为没有使用最左的索引字段，所以索引失效
explain select * from test02 where age &#x3D; 22 and address &#x3D; &#39;chengdu&#39;; -- not ok
-- % 开头索引会失效
explain select * from test02 where name like &#39;%lisi&#39; and address &#x3D; &#39;chengdu&#39;; -- not ok
-- _ 开头索引会失效
explain select * from test02 where name like &#39;_lisi&#39; and address &#x3D; &#39;chengdu&#39;; -- not ok<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>全文索引（MySQL的全文索引基本不用）- 了解</p>
</li>
</ul>
<h3 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DROP INDEX index_name ON tbl_name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="索引的优缺点"><a href="#索引的优缺点" class="headerlink" title="索引的优缺点"></a>索引的优缺点</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul>
<li>提升了查询效率</li>
<li>减少了磁盘的IO</li>
</ul>
<h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>增加了磁盘空间</li>
<li>降低了DML语句的效率。因为增加、删除、修改数据都会影响索引文件的变动。Innodb中的索引使用B+Tree的数据结构，索引数据发生变化后，B+Tree为了保证平衡，会进行树的自旋转，所以会影响性能。</li>
</ul>
<h3 id="创建索引的注意点"><a href="#创建索引的注意点" class="headerlink" title="创建索引的注意点"></a>创建索引的注意点</h3><ul>
<li>经常更新的数据不宜使用索引。</li>
<li>值范围太小的字段不宜使用索引。比如：性别字段</li>
<li>Blob和Text字段不使用索引</li>
<li>数据量低于1000 行数据不建议使用索引</li>
<li>经常出现在where中的字段推荐使用索引</li>
<li>经常出现在group by中的字段推荐使用索引</li>
<li>经常出现在order by中的字段推荐使用索引</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">小白不白</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://Cherish779.github.io/2022/08/18/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%AE%8C%E7%BE%8E%E7%89%88/">http://Cherish779.github.io/2022/08/18/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%AE%8C%E7%BE%8E%E7%89%88/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">小白不白</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                                    <span class="chip bg-color">MySQL学习笔记</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/null" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/null" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/08/21/JDBC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/7.jpg" class="responsive-img" alt="JDBC学习笔记">
                        
                        <span class="card-title">JDBC学习笔记</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-08-21
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            小白不白
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/JDBC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">JDBC学习笔记</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/08/18/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E8%80%81%E6%9D%9C%E7%89%88/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/16.jpg" class="responsive-img" alt="MySQL学习笔记">
                        
                        <span class="card-title">MySQL学习笔记</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-08-18
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            小白不白
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">MySQL学习笔记</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2022</span>
            
            <a href="/about" target="_blank">小白不白</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">175.2k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Cherish779" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:765149691@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=765149691" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 765149691" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/snow.js"><\/script>');
            }
        </script>
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
